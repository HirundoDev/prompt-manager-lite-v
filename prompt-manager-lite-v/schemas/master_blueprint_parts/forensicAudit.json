{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$comment": "Playbook: prompt_playbooks/schemas_playbooks/playbook_schema-forensicAudit.md",
    "title": "Forensic Audit",
    "description": "(Generated by Logic Auditor) A detailed audit of the codebase, identifying code smells, technical debt, and security vulnerabilities.",
    "type": "object",
    "properties": {
        "summary": {
            "type": "string",
            "description": "A high-level overview of the audit findings."
        },
        "codeSmells": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "file": { "type": "string" },
                    "line": { "type": "integer" },
                    "description": { "type": "string" },
                    "severity": { "type": "string", "enum": ["Critical", "Major", "Minor", "Info"] }
                }
            }
        },
        "technicalDebt": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "area": { "type": "string", "description": "e.g., Testing, Documentation, Refactoring" },
                    "description": { "type": "string" },
                    "effortToFix": { "type": "string", "description": "e.g., 'Low', 'Medium', 'High'" }
                }
            }
        },
        "events": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": { "type": "string" },
                    "description": { "type": "string" },
                    "pii": { "type": "boolean" },
                    "retentionDays": { "type": "integer" },
                    "storage": { "type": "string" }
                }
            }
        },
        "trails": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "actor": { "type": "string" },
                    "action": { "type": "string" },
                    "object": { "type": "string" },
                    "timestampPolicy": { "type": "string" }
                }
            }
        },
        "export": {
            "type": "object",
            "properties": {
                "formats": { "type": "array", "items": { "type": "string" } },
                "accessControls": { "type": "array", "items": { "type": "string" } }
            }
        },
        "compliance": {
            "type": "object",
            "properties": {
                "sox": { "type": "object", "properties": { "requirements": { "type": "array", "items": { "type": "string" } } } },
                "gdpr": { "type": "object", "properties": { "requirements": { "type": "array", "items": { "type": "string" } } } },
                "hipaa": { "type": "object", "properties": { "requirements": { "type": "array", "items": { "type": "string" } } } }
            }
        }
    }
}