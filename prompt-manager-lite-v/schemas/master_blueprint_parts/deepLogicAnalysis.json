{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$comment": "Playbook: prompt_playbooks/schemas_playbooks/playbook_schema-deepLogicAnalysis.md",
    "title": "Deep Logic Analysis",
    "description": "(Generated by Logic Auditor) An in-depth analysis of complex business logic, algorithms, and potential edge cases.",
    "type": "object",
    "properties": {
        "analyzedComponents": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "componentName": { "type": "string", "description": "The name of the component or module analyzed." },
                    "filePath": { "type": "string", "description": "The primary file path for the component." },
                    "findings": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "findingId": { "type": "string" },
                                "description": { "type": "string", "description": "Detailed description of the logical finding." },
                                "type": { "type": "string", "enum": ["Logical Flaw", "Edge Case", "Complexity Hotspot", "Inconsistency"] },
                                "recommendation": { "type": "string", "description": "Suggested action or refactoring." }
                            }
                        }
                    }
                }
            }
        },
        "domains": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": { "type": "string" },
                    "description": { "type": "string" },
                    "keyInvariants": { "type": "array", "items": { "type": "string" } },
                    "edgeCases": { "type": "array", "items": { "type": "string" } },
                    "failureModes": { "type": "array", "items": { "type": "string" } },
                    "decisionPoints": {
                        "type": "array",
                        "items": { "type": "object", "properties": { "id": { "type": "string" }, "context": { "type": "string" }, "alternatives": { "type": "array", "items": { "type": "string" } }, "chosen": { "type": "string" }, "rationale": { "type": "string" }, "links": { "type": "object", "properties": { "adr": { "type": "string" }, "code": { "type": "array", "items": { "type": "string" } } } } } }
                    }
                }
            }
        },
        "criticalPaths": {
            "type": "array",
            "items": { "type": "object", "properties": { "id": { "type": "string" }, "steps": { "type": "array", "items": { "type": "string" } }, "preconditions": { "type": "array", "items": { "type": "string" } }, "postconditions": { "type": "array", "items": { "type": "string" } }, "metrics": { "type": "array", "items": { "type": "string" } } } }
        },
        "risks": {
            "type": "array",
            "items": { "type": "object", "properties": { "id": { "type": "string" }, "description": { "type": "string" }, "likelihood": { "type": "string", "enum": ["low", "medium", "high"] }, "impact": { "type": "string", "enum": ["low", "medium", "high"] }, "mitigations": { "type": "array", "items": { "type": "string" } } } }
        },
        "controls": {
            "type": "array",
            "items": { "type": "object", "properties": { "type": { "type": "string", "enum": ["monitor", "alert", "test"] }, "target": { "type": "string" }, "frequency": { "type": "string" } } }
        },
        "links": {
            "type": "object",
            "properties": {
                "adrs": { "type": "array", "items": { "type": "string" } },
                "runbooks": { "type": "array", "items": { "type": "string" } },
                "code": { "type": "array", "items": { "type": "string" } }
            }
        }
    }
}