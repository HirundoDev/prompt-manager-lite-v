{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$comment": "Playbook: prompt_playbooks/schemas_playbooks/playbook_schema-designPatterns.md",
  "title": "Design Patterns",
  "description": "(Generated by Software Architect) Catalog of design and architectural patterns used across frontend and backend, with governance and mappings.",
  "type": "object",
  "properties": {
    "patterns": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": { "type": "string" },
          "category": { "type": "string", "enum": ["frontend", "backend", "fullstack", "infrastructure"] },
          "type": { "type": "string", "enum": ["architectural", "design", "integration", "concurrency", "state", "data", "testing", "security", "resilience"] },
          "tags": { "type": "array", "items": { "type": "string" } },
          "maturity": { "type": "string", "enum": ["experimental", "recommended", "deprecated"] },
          "description": { "type": "string" },
          "context": { "type": "string" },
          "problem": { "type": "string" },
          "solution": { "type": "string" },
          "adoptionGuidelines": { "type": "string" },
          "migrationGuidelines": { "type": "string" },
          "examples": {
            "type": "object",
            "properties": {
              "frontend": {
                "type": "object",
                "properties": {
                  "framework": { "type": "string" },
                  "components": { "type": "array", "items": { "type": "string" } },
                  "codeRef": { "type": "string" }
                }
              },
              "backend": {
                "type": "object",
                "properties": {
                  "language": { "type": "string" },
                  "framework": { "type": "string" },
                  "modules": { "type": "array", "items": { "type": "string" } },
                  "codeRef": { "type": "string" }
                }
              }
            }
          },
          "consequences": {
            "type": "object",
            "properties": {
              "pros": { "type": "array", "items": { "type": "string" } },
              "cons": { "type": "array", "items": { "type": "string" } }
            }
          },
          "applicability": { "type": "array", "items": { "type": "string" } },
          "triggers": { "type": "array", "items": { "type": "string" } },
          "antiTriggers": { "type": "array", "items": { "type": "string" } },
          "antiPatterns": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": { "type": "string" },
                "description": { "type": "string" }
              }
            }
          },
          "references": { "type": "array", "items": { "type": "string", "format": "uri" } },
          "adrs": { "type": "array", "items": { "type": "string" } },
          "diagramRefs": { "type": "array", "items": { "type": "string", "format": "uri" } },
          "codeSamples": { "type": "array", "items": { "type": "object", "properties": { "language": { "type": "string" }, "snippetRef": { "type": "string" } } } },
          "knownUses": { "type": "array", "items": { "type": "object", "properties": { "system": { "type": "string" }, "component": { "type": "string" }, "link": { "type": "string", "format": "uri" } } } },
          "kpis": { "type": "object", "properties": { "metrics": { "type": "array", "items": { "type": "object", "properties": { "name": { "type": "string" }, "target": { "type": ["number", "string"] }, "measurement": { "type": "string" } } } } } },
          "risks": { "type": "array", "items": { "type": "string" } },
          "mitigations": { "type": "array", "items": { "type": "string" } },
          "compatibility": { "type": "object", "properties": { "compatibleWith": { "type": "array", "items": { "type": "string" } }, "incompatibleWith": { "type": "array", "items": { "type": "string" } } } },
          "constraints": { "type": "array", "items": { "type": "string" } },
          "assumptions": { "type": "array", "items": { "type": "string" } },
          "security": { "type": "object", "properties": { "implications": { "type": "array", "items": { "type": "string" } }, "threatModelRef": { "type": "string" } } },
          "compliance": { "type": "object", "properties": { "standards": { "type": "array", "items": { "type": "string" } } } },
          "versioning": { "type": "object", "properties": { "since": { "type": "string" }, "until": { "type": "string" } } },
          "lintRules": { "type": "array", "items": { "type": "object", "properties": { "tool": { "type": "string" }, "rule": { "type": "string" }, "severity": { "type": "string" } } } }
        }
      }
    },
    "governance": {
      "type": "object",
      "properties": {
        "preferredPatterns": { "type": "array", "items": { "type": "string" } },
        "deprecatedPatterns": { "type": "array", "items": { "type": "string" } },
        "usagePolicies": { "type": "array", "items": { "type": "string" } },
        "owners": { "type": "array", "items": { "type": "string" } },
        "reviewProcess": { "type": "string" }
      }
    },
    "mapping": {
      "type": "object",
      "properties": {
        "frontend": {
          "type": "object",
          "properties": {
            "patternsUsed": { "type": "array", "items": { "type": "string" } },
            "libraries": { "type": "array", "items": { "type": "string" } }
          }
        },
        "backend": {
          "type": "object",
          "properties": {
            "patternsUsed": { "type": "array", "items": { "type": "string" } },
            "frameworks": { "type": "array", "items": { "type": "string" } }
          }
        },
        "infrastructure": {
          "type": "object",
          "properties": {
            "patternsUsed": { "type": "array", "items": { "type": "string" } },
            "platforms": { "type": "array", "items": { "type": "string" } },
            "services": { "type": "array", "items": { "type": "string" } }
          }
        },
        "devex": {
          "type": "object",
          "properties": {
            "patternsUsed": { "type": "array", "items": { "type": "string" } },
            "tools": { "type": "array", "items": { "type": "string" } },
            "scaffolds": { "type": "array", "items": { "type": "string" } }
          }
        }
      }
    },
    "relationships": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "pattern": { "type": "string" },
          "relatesTo": { "type": "string" },
          "relationType": { "type": "string", "enum": ["complements", "alternative", "dependsOn"] }
        }
      }
    }
  }
}
