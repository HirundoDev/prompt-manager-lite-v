{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "$comment": "Playbook: prompt_playbooks/schemas_playbooks/playbook_schema-businessLogic.md",
    "title": "Business Logic",
    "description": "(Generated by Business Logic Analyst) A definitive guide to the core business rules and logic that govern the application's behavior.",
    "type": "object",
    "properties": {
        "businessRules": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "ruleId": { "type": "string" },
                    "description": { "type": "string", "description": "A clear, plain-language description of the rule." },
                    "trigger": { "type": "string", "description": "The event or condition that triggers this rule." },
                    "outcome": { "type": "string", "description": "The expected result or action when the rule is applied." }
                },
                "required": ["ruleId", "description"]
            }
        },
        "rules": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "id": { "type": "string" },
                    "title": { "type": "string" },
                    "description": { "type": "string" },
                    "inputs": {
                        "type": "array",
                        "items": { "type": "object", "properties": { "name": { "type": "string" }, "type": { "type": "string" }, "source": { "type": "string" } } }
                    },
                    "outputs": {
                        "type": "array",
                        "items": { "type": "object", "properties": { "name": { "type": "string" }, "type": { "type": "string" }, "target": { "type": "string" } } }
                    },
                    "preconditions": { "type": "array", "items": { "type": "string" } },
                    "postconditions": { "type": "array", "items": { "type": "string" } },
                    "constraints": { "type": "array", "items": { "type": "string" } },
                    "examples": { "type": "array", "items": { "type": "object", "properties": { "given": { "type": "object" }, "when": { "type": "string" }, "then": { "type": "object" } } } },
                    "links": { "type": "object", "properties": { "prd": { "type": "string" }, "adr": { "type": "string" }, "codeRefs": { "type": "array", "items": { "type": "string" } } } }
                }
            }
        },
        "policies": {
            "type": "array",
            "items": {
                "type": "object",
                "properties": {
                    "name": { "type": "string" },
                    "scope": { "type": "string", "enum": ["global", "module"] },
                    "enforcement": { "type": "string", "enum": ["hard", "soft"] },
                    "owner": { "type": "string" },
                    "controls": { "type": "array", "items": { "type": "string" } }
                }
            }
        },
        "evaluation": {
            "type": "object",
            "properties": {
                "engine": { "type": "string", "enum": ["decision-table", "rules-engine", "custom"] },
                "priority": { "type": "string" }
            }
        }
    }
}